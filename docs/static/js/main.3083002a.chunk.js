(this["webpackJsonpour-wedding"]=this["webpackJsonpour-wedding"]||[]).push([[0],{70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(1),s=n(24),r=n.n(s),i=n(7),o=n(51),u=n(8),l=n(20),d=n.n(l),j=n(27),m=n(37);n(72);m.a.initializeApp({apiKey:"AIzaSyCHRcw3FIUilwa42WbrsCXWDD3YfwJSaaY",authDomain:"cd-our-wedding.firebaseapp.com",projectId:"cd-our-wedding",storageBucket:"cd-our-wedding.appspot.com",messagingSenderId:"564432822179",appId:"1:564432822179:web:6888a9fe0dabb20d2fc416"});var b=m.a.firestore(),f=n(44),O=n(4),p=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.doc("families/".concat(t)).get();case 2:if(!(n=e.sent.data())){e.next=10;break}return e.next=6,b.collection("families/".concat(t,"/guests")).get();case 6:return a=e.sent,c=[],a.forEach((function(e){return c.push(Object(O.a)({id:e.id},e.data()))})),e.abrupt("return",Object(O.a)(Object(O.a)({},n),{},{id:t,guests:c}));case 10:return e.abrupt("return",{});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n,a,c,s,r,i,o,u,l,j,m,O,p,g,h,x,v,y;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return t=[],e.next=5,b.collection("families").get();case 5:n=e.sent.docs,a=Object(f.a)(n),e.prev=7,a.s();case 9:if((c=a.n()).done){e.next=21;break}return s=c.value,r=s.data(),i=r.family_name,o=[],e.next=15,b.collection("families/".concat(s.id,"/guests")).get();case 15:u=e.sent.docs,l=Object(f.a)(u);try{for(l.s();!(j=l.n()).done;)m=j.value,O=m.data(),p=O.first_name,g=O.middle_name,h=O.last_name,x=O.second_last_name,v=O.nickname,y=O.goes,o.push({firstName:p,middleName:g,lastName:h,secondLastName:x,nickname:v,goes:y})}catch(d){l.e(d)}finally{l.f()}t.push({id:s.id,familyName:i,guests:o,total:o.length,confirmed:o.filter((function(e){return e.goes})).length});case 19:e.next=9;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(7),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:return e.abrupt("return",t);case 30:case"end":return e.stop()}}),e,null,[[7,23,26,29]])})));return function(){return e.apply(this,arguments)}}(),h="[SHOW] show form",x="[SHOW] hide form",v="[UI] set error",y="[UI] remove error",_="[UI] Start loading",N="[UI] Finish loading",w="[UI] Finish initial loading",k="[FAMILY] load family data",F="[GUESTS] update family guest if goes",I="[FAMILIES] load all guests",C="[Copied] change",E="[Timeout] change",L="[Filtered] filtered list",S=function(){return{type:_}},q=function(){return{type:N}},T=function(e){return{type:k,payload:e}},U=function(e,t){return{type:F,payload:{guestId:e,goes:t}}},R=function(e){return{type:I,payload:e}},D=n(40),H=n(49),J=n(38),M=function(e){var t=e.families,n=e.showCopiedLink,s=Object(i.b)(),r=Object(i.c)((function(e){return e.ui})).filtered,o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(c.useState)(e),n=Object(D.a)(t,2),a=n[0],s=n[1];return[a,function(e){var t=e.target,n=t.name,c=t.value;return s(Object(O.a)(Object(O.a)({},a),{},Object(J.a)({},n,c)))},function(){return s(arguments.length>0&&void 0!==arguments[0]?arguments[0]:e)}]}({name:""}),u=Object(D.a)(o,2),l=u[0].name,d=u[1],j=function(e){var t=e.length-e.filter((function(e){return e.goes})).length;return 0===t?"all":t===e.length?"nobody":"mix"},m=function(e){return"".concat(window.location.protocol,"//").concat(window.location.host,"/?id=").concat(e)},b=function(e){return new RegExp("".concat(l),"ig").test(e)},f=function(e){var t=e.firstName,n=e.middleName,a=e.lastName,c=e.secondLastName,s=e.nickname;return b("".concat(t," ").concat(n," ").concat(a," ").concat(c," ").concat(s))},p=t.filter((function(e){var t=e.familyName,n=e.guests;return(r&&n.filter((function(e){return e.goes})).length>0||!r)&&(l&&(b(t)||n.filter(f).length>0)||!l)})).map((function(e){return Object(O.a)(Object(O.a)({},e),{},{guests:l?e.guests.filter(f):e.guests})})).map((function(e){return 0===e.guests.length?t.find((function(t){return t.id===e.id})):e})),g={families:p.length,guests:p.reduce((function(e,t){return e+t.guests.length}),0),confirmed:p.reduce((function(e,t){return e+t.guests.filter((function(e){return e.goes})).length}),0)};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"admin__guests-title",children:"Lista de invitados"}),Object(a.jsxs)("div",{className:"admin__guests-detail",children:[Object(a.jsx)("div",{className:"input",children:Object(a.jsx)("input",{type:"text",name:"name",placeholder:"Filtro: nombre, familia...",autoComplete:"off",value:l,onChange:d})}),Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Familias:"})," ",g.families]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Invitados:"})," ",g.guests]}),Object(a.jsxs)("div",{className:"admin__guests-filter",onClick:function(){return s({type:L,payload:!r})},children:[Object(a.jsx)("strong",{children:"Confirmados:"})," ",g.confirmed]})]}),Object(a.jsx)("div",{className:"admin__guests-container",children:p.map((function(e){var t=e.id,c=e.familyName,s=e.guests;return Object(a.jsx)(H.CopyToClipboard,{text:m(t),onCopy:n,children:Object(a.jsxs)("div",{className:"admin__guests-container-row ".concat(j(s)),children:[Object(a.jsx)("h1",{children:c}),Object(a.jsx)("ul",{children:s.map((function(e){var t=e.firstName,n=e.middleName,c=e.lastName,s=e.secondLastName,r=e.nickname,i=e.goes;return Object(a.jsxs)("li",{className:i?"yes":"no",children:["(",r,") ",t," ",n," ",c," ",s]},r)}))})]})},t)}))})]})},Y=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.ui})),n=t.loading,s=t.timeout,r=t.copied,o=Object(i.c)((function(e){return e.family})).families;return Object(c.useEffect)((function(){o&&0!==o.length||e(function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(S()),e.next=3,g();case 3:n=e.sent,t(R(n)),t(q());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e,o]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"admin__guests",children:[n&&Object(a.jsx)("aside",{className:"admin__guests-loading",children:"Cargando invitados..."}),!n&&o&&Object(a.jsx)(M,{families:o,showCopiedLink:function(){clearTimeout(s),e({type:C,payload:!0});var t=setTimeout((function(){return e({type:C,payload:!1})}),5e3);e({type:E,payload:t})}})]}),Object(a.jsx)("div",{className:"admin__guests-copied animate__animated ".concat(r?"animate__fadeInDown":"animate__fadeOutUp"),children:"Invitaci\xf3n copiada al portapapeles \ud83d\ude0b"})]})},z=n(91),A=n(90),B=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.ui})).loading,n=Object(i.c)((function(e){return e.family})).family,c=n.id,s=n.family_name,r=n.guests,o=function(t){return function(n){e(function(e,t,n){return function(){var a=Object(j.a)(d.a.mark((function a(c){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c(S()),a.next=3,b.doc("families/".concat(e,"/guests/").concat(t)).update({goes:n});case 3:c(U(t,n)),c(q());case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(c,t,n.target.checked))}},u=r.filter((function(e){return e.goes})),l=r.filter((function(e){return!e.goes})),m=function(e){return e.length>1?e.slice(0,e.length-1).join(", ")+" y "+e[e.length-1]:e[0]},f=m(u.map((function(e){return e.nickname}))),O=m(l.map((function(e){return e.nickname}))),p=Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("br",{}),"\xa1Nos vemos el 25 de Julio \ud83d\ude0b!",Object(a.jsx)("br",{}),"Yo ver\xe9, la mejor pinta ese d\xeda \ud83d\udd7a\ud83c\udffb\ud83d\udc83\ud83c\udffb\ud83e\udd2d"]});return Object(a.jsxs)("aside",{className:"confirm-container animate__animated animate__backInRight animate__faster",children:[Object(a.jsxs)("div",{className:"description",children:[Object(a.jsxs)("h2",{children:[s,", \xbfNos acompa\xf1a",r.length>1?"n":"s","?"]}),Object(a.jsxs)("span",{children:["Para confirmar ",r.length>1?"la":"tu"," asistencia, solo debes decir ",r.length>1?"qui\xe9n va":"si vas"," o no a nuestra boda."]}),Object(a.jsx)("span",{className:"icon",children:"\ud83e\udd70"})]}),Object(a.jsx)("hr",{}),Object(a.jsx)("form",{children:r.map((function(e,n){var c=e.first_name,s=e.middle_name,r=e.last_name,i=e.second_last_name,u=e.goes,l=e.id;return Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{className:"name",children:"".concat("".concat(c," ").concat(s).trim()," ").concat("".concat(r," ").concat(i).trim())}),Object(a.jsx)(z.a,{label:u?"\ud83d\ude0a":"\ud83e\udd7a",title:"Clic para cambiar",control:Object(a.jsx)(A.a,{onChange:o(l),checked:u,name:"goes",color:"secondary"}),disabled:t})]},n)}))}),Object(a.jsx)("div",{className:"message",children:r.length===u.length?Object(a.jsxs)(a.Fragment,{children:["\xa1Gracias ".concat(f," por acompa\xf1arnos \ud83e\udd17!"),Object(a.jsx)("br",{}),"Estamos ansiosos porque este d\xeda llegue \ud83e\udd70 y tener el placer de contar \n                                con ".concat(1===u.length?"tu":"su"," compa\xf1\xeda en este momento tan especial para nosotros \ud83d\ude03"),Object(a.jsx)("br",{}),p]}):0===u.length?"Qu\xe9 mal que no nos acompa\xf1a".concat(1===r.length?"s":"n"," \ud83d\ude15, pero sabemos que podemos contar con").concat(1===r.length?"tigo":" ustedes"," para cualquier otra ocasi\xf3n \ud83d\udcaa\ud83c\udffb"):Object(a.jsxs)(a.Fragment,{children:["\xa1Gracias ".concat(f," por acompa\xf1arnos!"),Object(a.jsx)("br",{}),p,Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),"Es una pena que ".concat(O," no nos acompa\xf1e").concat(1!==l.length?"n":""," \ud83e\udd7a, pero sabemos \n                            que podemos contar con").concat(1===l.length?"tigo":" ustedes"," para cualquier otra ocasi\xf3n \ud83d\udcaa\ud83c\udffb")]})}),Object(a.jsx)("button",{onClick:function(){var t=document.querySelector(".confirm-container");t.classList.remove("animate__backInRight"),t.classList.add("animate__backOutRight"),setTimeout((function(){return e({type:x})}),200)},disabled:t,children:"Regresar"})]})},G=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"frame top"}),Object(a.jsx)("div",{className:"frame bottom"})]})},P=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.ui})),n=t.loading,c=t.initialLoadingEnded;return c?Object(a.jsx)(a.Fragment,{}):(setTimeout((function(){var t=n?"":"animate__animated animate__fadeOut animate__faster",a=document.querySelector(".loader");!c&&a&&(a.className="loader ".concat(t," no-pointer"),e({type:w}))}),2e3),Object(a.jsx)("div",{className:"loader"}))},W=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.family})).family,n=Object(i.c)((function(e){return e.ui})).loading,c=Object.keys(t).length;return c&&(document.title="\xa1Bienveni@ ".concat(t.family_name,"!")),Object(a.jsxs)("aside",{className:"container animate__animated animate__backInLeft animate__faster",children:[Object(a.jsxs)("div",{className:"notice",children:["\xa1",c?"Hola ".concat(t.family_name):Object(a.jsxs)(a.Fragment,{children:["Bienvenid",Object(a.jsx)("small",{children:"@"})," a nuestra boda"]}),"!"]}),t.guests?Object(a.jsxs)("div",{className:"little-words",children:["Nos llena de emoci\xf3n celebrar nuestra uni\xf3n junto a ",t.guests.length>1?"ustedes":"ti",",",Object(a.jsx)("br",{}),"que ",t.guests.length>1?"son":"eres"," especial",t.guests.length>1?"es":""," para nosotros."]}):Object(a.jsx)("div",{className:"little-words",children:"Nos llena de emoci\xf3n celebrar nuestra uni\xf3n junto a ustedes."}),Object(a.jsxs)("div",{className:"couple-names",children:["Carlos",Object(a.jsx)("br",{}),"&",Object(a.jsx)("br",{}),"M\xf3nica"]}),Object(a.jsxs)("div",{className:"words",children:['"La vida une a las personas adecuadas en el momento adecuado.',Object(a.jsx)("br",{}),'Que este sea nuestro destino: amar, vivir y empezar cada d\xeda juntos"']}),Object(a.jsxs)("div",{className:"date",children:[Object(a.jsx)("div",{className:"cute",children:"Domingo"}),Object(a.jsxs)("div",{className:"hour",children:[Object(a.jsx)("h2",{children:"25"}),Object(a.jsx)("span",{children:"2021"}),Object(a.jsx)("span",{children:"3:00 PM"})]}),Object(a.jsx)("div",{className:"cute",children:"Julio"})]}),Object(a.jsxs)("div",{className:"location",onClick:function(){window.open("https://goo.gl/maps/XkoCP9FdpzKGYFE37","_blank")},children:[Object(a.jsx)("i",{className:"fas fa-map-marked-alt"}),Object(a.jsx)("br",{}),"Hacienda San Sebasti\xe1n, Kil\xf3metro 3, v\xeda El Rosal - Subachoque"]}),c>0&&Object(a.jsx)("div",{className:"buttons",children:Object(a.jsx)("button",{onClick:function(){var t=document.querySelector(".container");t.classList.remove("animate__backInLeft"),t.classList.add("animate__backOutLeft"),setTimeout((function(){return e({type:h})}),200)},disabled:n,children:"Confirmar asistencia"})})]})},X=function(){var e=window.location.search.split("?id=").join("").split("/").join(""),t=Object(i.b)(),n=Object(i.c)((function(e){return e.ui})).showForm;return Object(c.useEffect)((function(){""!==e&&t(function(e){return function(){var t=Object(j.a)(d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(S()),t.next=3,p(e);case 3:a=t.sent,n(T(a)),n(q());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))}),[t,e]),""!==e?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(P,{}),Object(a.jsx)(G,{}),n?Object(a.jsx)(B,{}):Object(a.jsx)(W,{})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(P,{}),Object(a.jsx)(G,{}),Object(a.jsx)(W,{})]})},K=n(26),Q=n(50),V=n(47),Z={family:{},families:[]},$={showForm:!1,loading:!1,msgError:null,initialLoadingEnded:!1,copied:!1,timeout:-1,filtered:!1},ee=Object(K.c)({ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(O.a)(Object(O.a)({},e),{},{initialLoadingEnded:!0});case h:return Object(O.a)(Object(O.a)({},e),{},{showForm:!0});case x:return Object(O.a)(Object(O.a)({},e),{},{showForm:!1});case v:return Object(O.a)(Object(O.a)({},e),{},{msgError:t.payload});case y:return Object(O.a)(Object(O.a)({},e),{},{msgError:null});case _:return Object(O.a)(Object(O.a)({},e),{},{loading:!0});case N:return Object(O.a)(Object(O.a)({},e),{},{loading:!1});case C:return Object(O.a)(Object(O.a)({},e),{},{copied:t.payload});case E:return Object(O.a)(Object(O.a)({},e),{},{timeout:t.payload});case L:return Object(O.a)(Object(O.a)({},e),{},{filtered:t.payload});default:return e}},family:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(O.a)(Object(O.a)({},e),{},{family:Object(O.a)({},t.payload)});case F:var n=Object(V.a)(e.family.guests),a=t.payload,c=a.guestId,s=a.goes;return n=n.map((function(e){return e.id===c&&(e.goes=s),e})),Object(O.a)(Object(O.a)({},e),{},{family:Object(O.a)(Object(O.a)({},e.family),{},{guests:Object(V.a)(n)})});case I:return Object(O.a)(Object(O.a)({},e),{},{families:t.payload});default:return e}}}),te="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||K.d,ne=Object(K.e)(ee,te(Object(K.a)(Q.a))),ae=function(){return Object(a.jsx)(i.a,{store:ne,children:Object(a.jsx)(o.a,{children:Object(a.jsxs)(u.c,{children:[Object(a.jsx)(u.a,{path:"/admin",component:function(){return Object(a.jsx)(Y,{})}}),Object(a.jsx)(u.a,{path:"/",component:function(){return Object(a.jsx)(X,{})}})]})})})};n(70);r.a.render(Object(a.jsx)(ae,{}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.3083002a.chunk.js.map